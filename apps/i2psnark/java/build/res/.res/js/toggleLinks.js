"use strict";const d=document,htmlTag=d.documentElement,toggleCss=d.head.querySelector("#toggleLinks"),toggle=d.getElementById("linkswitch"),toast=d.getElementById("toast"),page=d.getElementById("page");let linkToggleConfig=localStorage.getItem("linkToggle")||"magnets",magnetsVisible=!1;function initLinkToggler(){function setLinkMode(){var isMagnetMode="magnets"===linkToggleConfig;toggle.checked=isMagnetMode,d.body.classList.toggle("magnets",isMagnetMode),d.body.classList.toggle("tlinks",!isMagnetMode)}function showToast(msg){toast.classList.remove("dismiss"),toast.innerHTML=msg,toast.removeAttribute("hidden"),async function(){const X=window.pageXOffset,Y=window.pageYOffset,iframed=htmlTag.classList.contains("iframed")||window.top!==parent.window.top;return iframed,new Promise(resolve=>{window.scrollTo(0,0);let parentX,parentY;iframed&&(parentX=parent.window.pageXOffset,parentY=parent.window.pageYOffset,parent.window.scrollTo(0,0)),setTimeout(()=>{window.scrollTo({top:Y,left:X,behavior:"smooth"}),iframed&&parent.window.scrollTo({top:parentY,left:parentX,behavior:"smooth"}),resolve()},3500)})}(),setTimeout(()=>{toast.classList.add("dismiss")},3500)}toggle&&(setLinkMode(),page.addEventListener("click",function(event){var magnetHash;event.target.matches(".copyMagnet")&&(d.body.classList.add("copyingToClipboard"),event.preventDefault(),event.stopPropagation(),(event=event.target.closest("a").href)&&event.startsWith("magnet:?xt=urn:btih:")?(async function(text){try{await navigator.clipboard.writeText(text)}catch(error){}}(event),magnetHash=event.substring(event.indexOf(":")+1,event.indexOf("&")),event=event.substring(event.lastIndexOf("=")+1),showToast("Magnet link copied to clipboard: <b>"+(event=decodeURIComponent(event))+"</b><br>Hash: <b>"+magnetHash+"</b>"),setTimeout(()=>{d.body.classList.remove("copyingToClipboard")},4e3)):showToast("Invalid magnet link."))}),page.addEventListener("change",event=>{"linkswitch"===event.target.id&&(linkToggleConfig="magnets"===linkToggleConfig?"links":"magnets",localStorage.linkToggle=linkToggleConfig,setLinkMode())}))}d.addEventListener("DOMContentLoaded",()=>{initLinkToggler()});