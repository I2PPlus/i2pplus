let lastSnarkGraphRefresh=0,graphEnabled=!0,refreshCache=new Map,refreshCount=0;const noload=document.getElementById("noload");function refreshGraph(){var now=Date.now();const graphcss=document.getElementById("graphcss");if(!(now-lastSnarkGraphRefresh<3e5&&0!==refreshCount)&&graphEnabled){const graphUrl="/viewstat.jsp?stat=[I2PSnark] InBps&showEvents=false&period=60000&periodCount=1440&end=0&width=2000&height=160&hideLegend=true&hideTitle=true&hideGrid=true&t="+(lastSnarkGraphRefresh=now);refreshCache.has(graphUrl)?graphcss.innerText=":root{--snarkGraph:url("+refreshCache.get(graphUrl)+")}":fetch(graphUrl).then(response=>{if(response.ok)return response.blob();if(400===response.status)throw graphEnabled=!1,new Error("400 Bad Request");throw new Error("Network response was not ok")}).then(blob=>{blob=URL.createObjectURL(blob),graphcss.innerText=":root{--snarkGraph:url('"+blob+"')}",refreshCache.set(graphUrl,`url("${blob}")`),setTimeout(()=>refreshCache.delete(graphUrl),3e5),refreshCount++}).catch(error=>{if("400 Bad Request"===error.message||!graphEnabled)if(graphcss)graphcss.textContent="";else{const graphcss=document.createElement("style");graphcss.id="graphcss",graphcss.textContent=":root{--snarkGraph{url()}",document.body.appendChild(graphcss)}})}}let snarkGraphIntervalId;if(!snarkGraphIntervalId){const intervalTime=noload?3e5:9e5;snarkGraphIntervalId=setInterval(refreshGraph,intervalTime)}function clearIntervalAndAbort(){clearInterval(snarkGraphIntervalId)}window.addEventListener("beforeunload",clearIntervalAndAbort),document.addEventListener("DOMContentLoaded",refreshGraph);