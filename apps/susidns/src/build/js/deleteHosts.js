async function performDelete(hosts){var url="/susidns/addressbook?book=router";const formData=new URLSearchParams;formData.append("book","router"),formData.append("serial",nonce),hosts.forEach(host=>formData.append("checked",host.trim())),formData.append("action","Delete Selected");try{var getResponse=await fetch(url,{method:"GET",credentials:"include"});if(!getResponse.ok)throw new Error("Failed to retrieve initial page: "+getResponse.status);var cookieHeader=document.cookie.split(";").map(cookie=>cookie.trim()).find(cookie=>cookie.startsWith("JSESSIONID="))||"",serialInput=(new DOMParser).parseFromString(await getResponse.text(),"text/html").querySelector('input[name="serial"]'),serial=serialInput?serialInput.value:null;if(!serial)throw new Error("Serial (nonce) not found in the initial response.");formData.set("serial",serial);var messageContent,errorData,response=await fetch(url,{method:"POST",body:formData,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Cookie:cookieHeader},credentials:"include"});if(!response.ok)throw errorData=await response.text(),new Error(`Request failed with status ${response.status}: `+errorData);(messageContent=extractMessageContent(await response.text())).includes("Invalid form submission")?displayMessage(messageContent,"error",hosts):displayMessage(messageContent,"success",hosts)}catch(error){document.querySelector("h1").remove(),displayMessage(error.message,"error",hosts)}}function extractMessageContent(html){return(html=(new DOMParser).parseFromString(html,"text/html").getElementById("messages"))?html.innerHTML:"Server Error"}function displayMessage(message,className,hosts){var messageElement=document.getElementById("message");messageElement.className=className;let hostsList="";hosts&&0<hosts.length&&(hostsList="<br><strong>Hosts:</strong> "+hosts.join(", ")),messageElement.innerHTML=""+message+hostsList}const urlParams=new URLSearchParams(window.location.search),hostsParam=urlParams.get("hosts"),hosts=hostsParam?hostsParam.split(",").filter(Boolean):[];hosts.length?performDelete(hosts):displayMessage("Warning: No hosts specified in the URL.","warning",[]);