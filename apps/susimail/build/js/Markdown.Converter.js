"use strict";var Markdown="object"==typeof exports&&"function"==typeof require?exports:{};!function(){function identity(x){return x}function returnFalse(x){return!1}function HookCollection(){}function SaveHash(){}HookCollection.prototype={chain:function(hookname,func){var original=this[hookname];if(!original)throw new Error("unknown hook "+hookname);this[hookname]=original===identity?func:function(text){var args=Array.prototype.slice.call(arguments,0);return args[0]=original.apply(null,args),func.apply(null,args)}},set:function(hookname,func){if(!this[hookname])throw new Error("unknown hook "+hookname);this[hookname]=func},addNoop:function(hookname){this[hookname]=identity},addFalse:function(hookname){this[hookname]=returnFalse}},Markdown.HookCollection=HookCollection,SaveHash.prototype={set:function(key,value){this["s_"+key]=value},get:function(key){return this["s_"+key]}},Markdown.Converter=function(OPTIONS){var g_urls,g_titles,g_html_blocks,g_list_level,lettersThatJavaScriptDoesNotKnowAndQ,cp_Q,cp_A,cp_Z,dist_Za,pluginHooks=this.hooks=new HookCollection,asciify=(pluginHooks.addNoop("plainLinkText"),pluginHooks.addNoop("preConversion"),pluginHooks.addNoop("postNormalization"),pluginHooks.addNoop("preBlockGamut"),pluginHooks.addNoop("postBlockGamut"),pluginHooks.addNoop("preSpanGamut"),pluginHooks.addNoop("postSpanGamut"),pluginHooks.addNoop("postConversion"),identity),deasciify=identity,_DoItalicsAndBold=((OPTIONS=OPTIONS||{}).nonAsciiLetters&&(lettersThatJavaScriptDoesNotKnowAndQ=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,cp_Q="Q".charCodeAt(0),cp_A="A".charCodeAt(0),cp_Z="Z".charCodeAt(0),dist_Za="a".charCodeAt(0)-cp_Z-1,asciify=function(text){return text.replace(lettersThatJavaScriptDoesNotKnowAndQ,function(m){for(var v,c=m.charCodeAt(0),s="";0<c;)cp_Q<=(v=c%51+cp_A)&&v++,cp_Z<v&&(v+=dist_Za),s=String.fromCharCode(v)+s,c=c/51|0;return"Q"+s+"Q"})},deasciify=function(text){return text.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(m,s){for(var v,c=0,i=0;i<s.length;i++)v=s.charCodeAt(i),cp_Z<v&&(v-=dist_Za),cp_Q<v&&v--,c=51*c+(v-=cp_A);return String.fromCharCode(c)})}),OPTIONS.asteriskIntraWordEmphasis?function(text){return-1===text.indexOf("*")&&-1===text.indexOf("_")?text:(text=(text=(text=asciify(text)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|\S\*\*(?:[\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=\w)\D\*\D|[^\s*]\*(?:[\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),deasciify(text))}:function(text){return-1===text.indexOf("*")&&-1===text.indexOf("_")?text:(text=(text=(text=asciify(text)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),deasciify(text))});function _HashHTMLBlocks(text){return(text=(text=(text=(text=text.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,hashMatch)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,hashMatch)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,hashMatch)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,hashMatch)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,hashMatch)}function hashBlock(text){return text=text.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(g_html_blocks.push(text)-1)+"K\n\n"}function hashMatch(wholeMatch,m1){return hashBlock(m1)}this.makeHtml=function(text){if(g_urls)throw new Error("Recursive call to converter.makeHtml");return g_urls=new SaveHash,g_titles=new SaveHash,g_html_blocks=[],g_list_level=0,text=(text=_Detab(text="\n\n"+(text=(text=(text=(text=pluginHooks.preConversion(text)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")+"\n\n")).replace(/^[ \t]+$/gm,""),text=(text=(text=function(text){return text.replace(/~E(\d+)E/g,function(wholeMatch,m1){return m1=parseInt(m1),String.fromCharCode(m1)})}(text=_RunBlockGamut(text=function(text){return text.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(\n+)/gm,function(wholeMatch,m1,m2,m3,m4,m5,m6){return m1=m1.toLowerCase(),g_urls.set(m1,_EncodeAmpsAndAngles(m2)),m4?m3+m6:(m5&&g_titles.set(m1,m5.replace(/"/g,"&quot;")),"")})}(text=_HashHTMLBlocks(text=pluginHooks.postNormalization(text)))))).replace(/~D/g,"$$")).replace(/~T/g,"~"),text=pluginHooks.postConversion(text),g_html_blocks=g_titles=g_urls=null,text};var blockGamutHookCallback=function(t){return _RunBlockGamut(t)};function _RunBlockGamut(text,doNotUnhash,doNotCreateParagraphs){return text=function(text){return text.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(wholeMatch,m1){return hashBlock("<blockquote>\n"+(m1=(m1=(m1=_RunBlockGamut(m1=(m1=(m1=m1.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(wholeMatch,m1){return m1.replace(/^  /gm,"~0").replace(/~0/g,"")}))+"\n</blockquote>")})}(text=function(text){return(text=(text+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(wholeMatch,m1,m2){return"\n\n"+(m1="<pre><code>"+(m1=(m1=_Detab(m1=_EncodeCode(_Outdent(m1)))).replace(/^\n+/g,"")).replace(/\n+$/g,"")+"\n</code></pre>")+"\n\n"+m2})).replace(/~0/,"")}(text=function(text){return text+="~0",(text=g_list_level?text.replace(/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(wholeMatch,m1,m2){var first_number,list_type=-1<m2.search(/[*+-]/g)?"ul":"ol",m2=("ol"==list_type&&(first_number=parseInt(m2,10)),_ProcessListItems(m1,list_type)),m1="<"+list_type;return first_number&&1!==first_number&&(m1+=' start="'+first_number+'"'),m1+">"+(m2=m2.replace(/\s+$/,""))+"</"+list_type+">\n"}):text.replace(/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,function(wholeMatch,m1,m2,m3){var first_number,list_type=-1<m3.search(/[*+-]/g)?"ul":"ol",m3=("ol"==list_type&&(first_number=parseInt(m3,10)),_ProcessListItems(m2,list_type)),m2="<"+list_type;return first_number&&1!==first_number&&(m2+=' start="'+first_number+'"'),m1+m2+">\n"+m3+"</"+list_type+">\n"})).replace(/~0/,"")}(text=(text=(text=(text=function(text){return(text=(text=text.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(wholeMatch,m1){return"<h1>"+_RunSpanGamut(m1)+"</h1>\n\n"})).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(matchFound,m1){return"<h2>"+_RunSpanGamut(m1)+"</h2>\n\n"})).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(wholeMatch,m1,m2){return"<h"+(m1=m1.length)+">"+_RunSpanGamut(m2)+"</h"+m1+">\n\n"})}(text=pluginHooks.preBlockGamut(text,blockGamutHookCallback))).replace(/^[ ]{0,2}( ?\*){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?-){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?_){3,}[ \t]*$/gm,"<hr />\n")))),function(text,doNotUnhash,doNotCreateParagraphs){for(var grafs=(text=(text=text.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),grafsOut=[],markerRe=/~K(\d+)K/,end=grafs.length,i=0;i<end;i++){var str=grafs[i];markerRe.test(str)?grafsOut.push(str):/\S/.test(str)&&(str=(str=_RunSpanGamut(str)).replace(/^([ \t]*)/g,doNotCreateParagraphs?"":"<p>"),doNotCreateParagraphs||(str+="</p>"),grafsOut.push(str))}if(!doNotUnhash)for(end=grafsOut.length,i=0;i<end;i++)for(var foundAny=!0;foundAny;)foundAny=!1,grafsOut[i]=grafsOut[i].replace(/~K(\d+)K/g,function(wholeMatch,id){return foundAny=!0,g_html_blocks[id]});return grafsOut.join("\n\n")}(text=_HashHTMLBlocks(text=pluginHooks.postBlockGamut(text,blockGamutHookCallback)),doNotUnhash,doNotCreateParagraphs)}function _RunSpanGamut(text){return text=_EncodeAmpsAndAngles(text=(text=function(text){return text=(text=asciify(text)).replace(autoLinkRegex,handleTrailingParens),(text=deasciify(text)).replace(/<((https?|ftp):[^'">\s]+)>/gi,function(wholematch,m1){return'<a href="'+attributeSafeUrl(m1)+'">'+pluginHooks.plainLinkText(m1)+"</a>"})}(text=function(text){return-1!==text.indexOf("[")?(text=(text=text.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,writeAnchorTag)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,writeAnchorTag)).replace(/(\[([^\[\]]+)\])()()()()()/g,writeAnchorTag):text}(text=function(text){return-1!==text.indexOf("![")?(text=text.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,writeImageTag)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,writeImageTag):text}(text=function(text){return(text=text.replace(/\\(\\)/g,escapeCharacters_callback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,escapeCharacters_callback)}(text=function(text){return text.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(wholeMatch){return escapeCharacters(wholeMatch.replace(/(.)<\/?code>(?=.)/g,"$1`"),"!"==wholeMatch.charAt(1)?"\\`*_/":"\\`*_")})}(text=function(text){return text.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(wholeMatch,m1,m2,m3,m4){return m1+"<code>"+(m3=_EncodeCode(m3=(m3=m3.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P")+"</code>"})}(text=pluginHooks.preSpanGamut(text)))))))).replace(/~P/g,"://")),text=(text=_DoItalicsAndBold(text)).replace(/  +\n/g," <br>\n"),pluginHooks.postSpanGamut(text)}function writeAnchorTag(wholeMatch,m1,m2,m3,m4,m5,m6,m7){if(null==m7&&(m7=""),m2=m2.replace(/:\/\//g,"~P"),m3=m3.toLowerCase(),""==m4)if(m4="#"+(m3=""==m3?m2.toLowerCase().replace(/ ?\n/g," "):m3),null!=g_urls.get(m3))m4=g_urls.get(m3),null!=g_titles.get(m3)&&(m7=g_titles.get(m3));else{if(!(-1<m1.search(/\(\s*\)$/m)))return m1;m4=""}return m3='<a href="'+(m4=attributeSafeUrl(m4))+'"',""!=m7&&(m3+=' title="'+(m7=escapeCharacters(m7=attributeEncode(m7),"*_"))+'"'),m3+">"+m2+"</a>"}function attributeEncode(text){return text.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function writeImageTag(wholeMatch,m1,m2,m3,m4,m5,m6,m7){if(m3=m3.toLowerCase(),m7=m7||"",""==m4){if(m4="#"+(m3=""==m3?m2.toLowerCase().replace(/ ?\n/g," "):m3),null==g_urls.get(m3))return m1;m4=g_urls.get(m3),null!=g_titles.get(m3)&&(m7=g_titles.get(m3))}return m2=escapeCharacters(attributeEncode(m2),"*_[]()"),(m1='<img src="'+(m4=escapeCharacters(m4,"*_"))+'" alt="'+m2+'"')+' title="'+escapeCharacters(m7=attributeEncode(m7),"*_")+'" />'}var _listItemMarkers={ol:"\\d+[.]",ul:"[*+-]"};function _ProcessListItems(list_str,list_type){g_list_level++,list_str=list_str.replace(/\n{2,}$/,"\n"),list_str+="~0";var list_type=_listItemMarkers[list_type],list_type=new RegExp("(^[ \\t]*)("+list_type+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+list_type+")[ \\t]+))","gm"),last_item_had_a_double_newline=!1;return list_str=(list_str=list_str.replace(list_type,function(wholeMatch,m1,m2,m3){var ends_with_double_newline=/\n\n$/.test(m3),loose=ends_with_double_newline||-1<m3.search(/\n{2,}/)||last_item_had_a_double_newline,m3=_RunBlockGamut(_Outdent(m3),!0,!loose);return last_item_had_a_double_newline=ends_with_double_newline,"<li>"+m3+"</li>\n"})).replace(/~0/g,""),g_list_level--,list_str}function _EncodeCode(text){return escapeCharacters(text=(text=(text=text.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function _EncodeAmpsAndAngles(text){return(text=text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}var autoLinkRegex=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*[-A-Z0-9+&@#/%=~_|[\\])])(?=$|\\W)',"gi"),endCharRegex=new RegExp("[-A-Z0-9+&@#/%=~_|[\\])]","i");function handleTrailingParens(wholeMatch,lookbehind,protocol,link){if(lookbehind)return wholeMatch;if(")"!==link.charAt(link.length-1))return"<"+protocol+link+">";for(var parens=link.match(/[()]/g),level=0,i=0;i<parens.length;i++)"("===parens[i]?level<=0?level=1:level++:level--;var tail="";return level<0&&(lookbehind=new RegExp("\\){1,"+-level+"}$"),link=link.replace(lookbehind,function(trailingParens){return tail=trailingParens,""})),tail&&(wholeMatch=link.charAt(link.length-1),endCharRegex.test(wholeMatch)||(tail=wholeMatch+tail,link=link.substr(0,link.length-1))),"<"+protocol+link+">"+tail}function _Outdent(text){return(text=text.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function _Detab(text){var spaces,skew,v;return/\t/.test(text)?(spaces=["    ","   ","  "," "],skew=0,text.replace(/[\n\t]/g,function(match,offset){return"\n"===match?(skew=offset+1,match):(v=(offset-skew)%4,skew=offset+1,spaces[v])})):text}function attributeSafeUrl(url){return escapeCharacters(url=attributeEncode(url),"*_:()[]")}function escapeCharacters(text,charsToEscape,afterBackslash){return charsToEscape="(["+charsToEscape.replace(/([\[\]\\])/g,"\\$1")+"])",afterBackslash&&(charsToEscape="\\\\"+charsToEscape),afterBackslash=new RegExp(charsToEscape,"g"),text.replace(afterBackslash,escapeCharacters_callback)}function escapeCharacters_callback(wholeMatch,m1){return"~E"+m1.charCodeAt(0)+"E"}}}();