!function(undefined){if("undefined"!=typeof window){var bodyBackground,bodyMarginStr,bodyPadding,autoResize=!0,bodyMargin=0,bodyObserver=null,calculateWidth=!1,doubleEventList={resize:1,click:1},eventCancelTimer=128,firstRun=!0,height=1,heightCalcModeDefault="bodyOffset",heightCalcMode=heightCalcModeDefault,initLock=!0,initMsg="",inPageLinks={},interval=32,intervalTimer=null,logging=!1,mouseEvents=!1,msgID="[iFrameSizer]",msgIdLen=msgID.length,myID="",resetRequiredMethods={max:1,min:1,bodyScroll:1,documentElementScroll:1},resizeFrom="child",sendPermit=!0,target=window.parent,targetOriginDefault="*",tolerance=0,triggerLocked=!1,triggerLockedTimer=null,throttledTimer=16,width=1,widthCalcMode="scroll",win=window,onMessage=function(){warn("onMessage function not defined")},onReady=function(){},onPageInfo=function(){},customCalcMethods={height:function(){return warn("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return warn("Custom width calculation function not defined"),document.body.scrollWidth}},eventHandlersByName={},passiveSupported=!1;try{var options=Object.create({},{passive:{get:function(){passiveSupported=!0}}});window.addEventListener("test",noop,options),window.removeEventListener("test",noop,options)}catch(error){}var func,context,args,result,timeout,previous,getHeight={bodyOffset:function(){return document.body.offsetHeight+getComputedStyle("marginTop")+getComputedStyle("marginBottom")},offset:function(){return getHeight.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return customCalcMethods.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,getAllMeasurements(getHeight))},min:function(){return Math.min.apply(null,getAllMeasurements(getHeight))},grow:function(){return getHeight.max()},lowestElement:function(){return Math.max(getHeight.bodyOffset()||getHeight.documentElementOffset(),getMaxElement("bottom",getAllElements()))},taggedElement:function(){return getTaggedElements("bottom","data-iframe-height")}},getWidth={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return customCalcMethods.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(getWidth.bodyScroll(),getWidth.documentElementScroll())},max:function(){return Math.max.apply(null,getAllMeasurements(getWidth))},min:function(){return Math.min.apply(null,getAllMeasurements(getWidth))},rightMostElement:function(){return getMaxElement("right",getAllElements())},taggedElement:function(){return getTaggedElements("right","data-iframe-width")}},sizeIFrameThrottled=(func=sizeIFrame,timeout=null,previous=0,function(){var now=Date.now(),remaining=throttledTimer-(now-(previous=previous||now));return context=this,args=arguments,remaining<=0||throttledTimer<remaining?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout=timeout||setTimeout(later,remaining),result});addEventListener(window,"message",function(event){var messageType,processRequestFromParent={init:function(){function setupCustomCalcMethods(calcMode,calcFunc){return"function"==typeof calcMode&&(log("Setup custom "+calcFunc+"CalcMethod"),customCalcMethods[calcFunc]=calcMode,calcMode="custom"),calcMode}function sendMouse(e){sendMsg(0,0,e.type,e.screenY+":"+e.screenX)}function addMouseListener(evt,name){log("Add event listener: "+name),addEventListener(window.document,evt,sendMouse)}var data,value;function findTarget(location){var el,pagePosition,hash=location.split("#")[1]||location,location=decodeURIComponent(hash),location=document.getElementById(location)||document.getElementsByName(location)[0];undefined!==location?(el=(el=location).getBoundingClientRect(),pagePosition={x:window.pageXOffset!==undefined?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==undefined?window.pageYOffset:document.documentElement.scrollTop},log("Moving to in page link (#"+hash+") at x: "+(location={x:parseInt(el.left,10)+parseInt(pagePosition.x,10),y:parseInt(el.top,10)+parseInt(pagePosition.y,10)}).x+" y: "+location.y),sendMsg(location.y,location.x,"scrollToOffset")):(log("In page link (#"+hash+") not found in iFrame, so sending to parent"),sendMsg(0,0,"inPageLink","#"+hash))}function checkLocationHash(){var hash=window.location.hash,href=window.location.href;""!==hash&&"#"!==hash&&findTarget(href)}initMsg=event.data,target=event.source,data=initMsg.substr(msgIdLen).split(":"),myID=data[0],bodyMargin=undefined!==data[1]?Number(data[1]):bodyMargin,calculateWidth=undefined!==data[2]?"true"===data[2]:calculateWidth,logging=undefined!==data[3]?"true"===data[3]:logging,interval=undefined!==data[4]?Number(data[4]):interval,autoResize=undefined!==data[6]?"true"===data[6]:autoResize,bodyMarginStr=data[7],heightCalcMode=undefined!==data[8]?data[8]:heightCalcMode,bodyBackground=data[9],bodyPadding=data[10],tolerance=undefined!==data[11]?Number(data[11]):tolerance,inPageLinks.enable=undefined!==data[12]&&"true"===data[12],resizeFrom=undefined!==data[13]?data[13]:resizeFrom,widthCalcMode=undefined!==data[14]?data[14]:widthCalcMode,mouseEvents=undefined!==data[15]?Boolean(data[15]):mouseEvents,log("Initialising iFrame ("+window.location.href+")"),"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(function(){var data=window.iFrameResizer;log("Reading data from page: "+JSON.stringify(data)),Object.keys(data).forEach(depricate,data),onMessage="onMessage"in data?data.onMessage:onMessage,onReady="onReady"in data?data.onReady:onReady,targetOriginDefault="targetOrigin"in data?data.targetOrigin:targetOriginDefault,heightCalcMode="heightCalculationMethod"in data?data.heightCalculationMethod:heightCalcMode,widthCalcMode="widthCalculationMethod"in data?data.widthCalculationMethod:widthCalcMode}(),heightCalcMode=setupCustomCalcMethods(heightCalcMode,"height"),widthCalcMode=setupCustomCalcMethods(widthCalcMode,"width")),log("TargetOrigin for parent set to: "+targetOriginDefault),setBodyStyle("margin",(-1!==(value=undefined===bodyMarginStr?bodyMargin+"px":bodyMarginStr).indexOf("-")&&(warn("Negative CSS value ignored for margin"),value=""),value)),setBodyStyle("background",bodyBackground),setBodyStyle("padding",bodyPadding),(data=document.createElement("div")).style.clear="both",data.style.display="block",data.style.height="0",document.body.appendChild(data),checkHeightMode(),checkWidthMode(),document.documentElement.style.height="",document.body.style.height="",log('HTML & body height set to "auto"'),log("Enable public methods"),win.parentIFrame={autoResize:function(resize){return!0===resize&&!1===autoResize?(autoResize=!0,startEventListeners()):!1===resize&&!0===autoResize&&(autoResize=!1,manageEventListeners("remove"),null!==bodyObserver&&bodyObserver.disconnect(),clearInterval(intervalTimer)),sendMsg(0,0,"autoResize",JSON.stringify(autoResize)),autoResize},close:function(){sendMsg(0,0,"close")},getId:function(){return myID},getPageInfo:function(callback){"function"==typeof callback?(onPageInfo=callback,sendMsg(0,0,"pageInfo")):(onPageInfo=function(){},sendMsg(0,0,"pageInfoStop"))},moveToAnchor:function(hash){inPageLinks.findTarget(hash)},reset:function(){resetIFrame("parentIFrame.reset")},scrollTo:function(x,y){sendMsg(y,x,"scrollTo")},scrollToOffset:function(x,y){sendMsg(y,x,"scrollToOffset")},sendMessage:function(msg,targetOrigin){sendMsg(0,0,"message",JSON.stringify(msg),targetOrigin)},setHeightCalculationMethod:function(heightCalculationMethod){heightCalcMode=heightCalculationMethod,checkHeightMode()},setWidthCalculationMethod:function(widthCalculationMethod){widthCalcMode=widthCalculationMethod,checkWidthMode()},setTargetOrigin:function(targetOrigin){log("Set targetOrigin: "+targetOrigin),targetOriginDefault=targetOrigin},size:function(customHeight,customWidth){sendSize("size","parentIFrame.size("+(customHeight||"")+(customWidth?","+customWidth:"")+")",customHeight,customWidth)}},!0===mouseEvents&&(addMouseListener("mouseenter","Mouse Enter"),addMouseListener("mouseleave","Mouse Leave")),startEventListeners(),inPageLinks.enable?Array.prototype.forEach&&document.querySelectorAll&&(log("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(el){"#"!==el.getAttribute("href")&&addEventListener(el,"click",function(e){e.preventDefault(),findTarget(this.getAttribute("href"))})}),addEventListener(window,"hashchange",checkLocationHash),setTimeout(checkLocationHash,eventCancelTimer)):log("In page linking not enabled"),inPageLinks={findTarget:findTarget},sendSize("init","Init message from host page"),onReady(),firstRun=!1,setTimeout(function(){initLock=!1},eventCancelTimer)},reset:function(){initLock?log("Page reset ignored by init"):(log("Page size reset by host page"),triggerReset("resetPage"))},resize:function(){sendSize("resizeParent","Parent window requested size check")},moveToAnchor:function(){inPageLinks.findTarget(getData())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var msgBody=getData();log("PageInfoFromParent called from parent: "+msgBody),onPageInfo(JSON.parse(msgBody)),log(" --")},message:function(){var msgBody=getData();log("onMessage called from parent: "+msgBody),onMessage(JSON.parse(msgBody)),log(" --")}};function getMessageType(){return event.data.split("]")[1].split(":")[0]}function getData(){return event.data.substr(event.data.indexOf(":")+1)}function isInitMsg(){return event.data.split(":")[2]in{true:1,false:1}}msgID===(""+event.data).substr(0,msgIdLen)&&(!1===firstRun?(messageType=getMessageType())in processRequestFromParent?processRequestFromParent[messageType]():("undefined"==typeof module||!module.exports)&&"iFrameResize"in window||isInitMsg()||warn("Unexpected message ("+event.data+")"):isInitMsg()?processRequestFromParent.init():log('Ignored message of type "'+getMessageType()+'". Received before initialization.'))}),addEventListener(window,"readystatechange",chkLateLoaded),chkLateLoaded(),document.addEventListener("DOMContentLoaded",()=>{var newElement;document.getElementById("endOfPage")||((newElement=document.createElement("span")).id="endOfPage",newElement.setAttribute("data-iframe-height",""),document.body.appendChild(newElement))})}function noop(){}function addEventListener(el,evt,func,options){el.addEventListener(evt,func,!!passiveSupported&&(options||{}))}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function formatLogMsg(msg){return msgID+"["+myID+"] "+msg}function log(msg){logging&&"object"==typeof window.console&&console.log(formatLogMsg(msg))}function warn(msg){"object"==typeof window.console&&console.warn(formatLogMsg(msg))}function depricate(key){var splitName=key.split("Callback");2===splitName.length&&(this[splitName="on"+splitName[0].charAt(0).toUpperCase()+splitName[0].slice(1)]=this[key],delete this[key],warn("Deprecated: '"+key+"' has been renamed '"+splitName+"'. The old method will be removed in the next major version."))}function setBodyStyle(attr,value){undefined!==value&&""!==value&&"null"!==value&&log("Body "+attr+' set to "'+(document.body.style[attr]=value)+'"')}function manageTriggerEvent(options){var listener={add:function(eventName){function handleEvent(){sendSize(options.eventName,options.eventType)}eventHandlersByName[eventName]=handleEvent,addEventListener(window,eventName,handleEvent,{passive:!0})},remove:function(eventName){var handleEvent=eventHandlersByName[eventName];delete eventHandlersByName[eventName],window.removeEventListener(eventName,handleEvent,!1)}};options.eventNames&&Array.prototype.map?(options.eventName=options.eventNames[0],options.eventNames.map(listener[options.method])):listener[options.method](options.eventName),log(capitalizeFirstLetter(options.method)+" event listener: "+options.eventType)}function manageEventListeners(method){manageTriggerEvent({method:method,eventType:"Animation Start",eventName:"animationstart"}),manageTriggerEvent({method:method,eventType:"Animation Iteration",eventName:"animationiteration"}),manageTriggerEvent({method:method,eventType:"Animation End",eventName:"animationend"}),manageTriggerEvent({method:method,eventType:"Input",eventName:"input"}),manageTriggerEvent({method:method,eventType:"Mouse Up",eventName:"mouseup"}),manageTriggerEvent({method:method,eventType:"Mouse Down",eventName:"mousedown"}),manageTriggerEvent({method:method,eventType:"Orientation Change",eventName:"orientationchange"}),manageTriggerEvent({method:method,eventType:"Print",eventName:"afterprint"}),manageTriggerEvent({method:method,eventType:"Print",eventName:"beforeprint"}),manageTriggerEvent({method:method,eventType:"Ready State Change",eventName:"readystatechange"}),manageTriggerEvent({method:method,eventType:"Touch Start",eventName:"touchstart"}),manageTriggerEvent({method:method,eventType:"Touch End",eventName:"touchend"}),manageTriggerEvent({method:method,eventType:"Touch Cancel",eventName:"touchcancel"}),manageTriggerEvent({method:method,eventType:"Transition Start",eventName:"transitionstart"}),manageTriggerEvent({method:method,eventType:"Transition Iteration",eventName:"transitioniteration"}),manageTriggerEvent({method:method,eventType:"Transition End",eventName:"transitionend"}),"child"===resizeFrom&&manageTriggerEvent({method:method,eventType:"IFrame Resized",eventName:"resize"})}function checkCalcMode(calcMode,calcModeDefault,modes,type){return calcModeDefault!==calcMode&&(calcMode in modes||(warn(calcMode+" is not a valid option for "+type+"CalculationMethod."),calcMode=calcModeDefault),log(type+' calculation method set to "'+calcMode+'"')),calcMode}function checkHeightMode(){heightCalcMode=checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,"height")}function checkWidthMode(){widthCalcMode=checkCalcMode(widthCalcMode,"scroll",getWidth,"width")}function startEventListeners(){var elements,forceIntervalTimer,target,observer;function addImageLoadListners(mutation){function addImageLoadListener(element){!1===element.complete&&(log("Attach listeners to "+element.src),element.addEventListener("load",imageLoaded,!1),element.addEventListener("error",imageError,!1),elements.push(element))}"attributes"===mutation.type&&"src"===mutation.attributeName?addImageLoadListener(mutation.target):"childList"===mutation.type&&Array.prototype.forEach.call(mutation.target.querySelectorAll("img"),addImageLoadListener)}function removeImageLoadListener(element){log("Remove listeners from "+element.src),element.removeEventListener("load",imageLoaded,!1),element.removeEventListener("error",imageError,!1),function(element){elements.splice(elements.indexOf(element),1)}(element)}function imageEventTriggered(event,type,typeDesc){removeImageLoadListener(event.target),sendSize(type,typeDesc+": "+event.target.src)}function imageLoaded(event){imageEventTriggered(event,"imageLoad","Image loaded")}function imageError(event){imageEventTriggered(event,"imageLoadFailed","Image load failed")}!0===autoResize?(manageEventListeners("add"),forceIntervalTimer=interval<0,window.MutationObserver?forceIntervalTimer?initInterval():(elements=[],forceIntervalTimer=window.MutationObserver,target=document.querySelector("body"),observer=new forceIntervalTimer(function(mutations){sendSize("mutationObserver","mutationObserver: "+mutations[0].target+" "+mutations[0].type),mutations.forEach(addImageLoadListners)}),log("Create body MutationObserver"),observer.observe(target,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),bodyObserver={disconnect:function(){"disconnect"in observer&&(log("Disconnect body MutationObserver"),observer.disconnect(),elements.forEach(removeImageLoadListener))}}):(log("MutationObserver not supported in this browser!"),initInterval())):log("Auto Resize disabled")}function initInterval(){0!==interval&&(log("setInterval: "+interval+"ms"),intervalTimer=setInterval(function(){sendSize("interval","setInterval: "+interval)},Math.abs(interval)))}function getComputedStyle(prop,el){return el=el||document.body,el=null!==(el=document.defaultView.getComputedStyle(el,null))?el[prop]:0,parseInt(el,10)}function getMaxElement(side,elements){for(var elVal,elementsLength=elements.length,maxVal=0,Side=capitalizeFirstLetter(side),timer=Date.now(),i=0;i<elementsLength;i++)maxVal<(elVal=elements[i].getBoundingClientRect()[side]+getComputedStyle("margin"+Side,elements[i]))&&(maxVal=elVal);return timer=Date.now()-timer,log("Parsed "+elementsLength+" HTML elements"),log("Element position calculated in "+timer+"ms"),function(timer){throttledTimer/2<timer&&log("Event throttle increased to "+(throttledTimer=2*timer)+"ms")}(timer),maxVal}function getAllMeasurements(dimensions){return[dimensions.bodyOffset(),dimensions.bodyScroll(),dimensions.documentElementOffset(),dimensions.documentElementScroll()]}function getTaggedElements(side,tag){var elements=document.querySelectorAll("["+tag+"]");return 0===elements.length&&(warn("No tagged elements ("+tag+") found on page"),document.querySelectorAll("body *")),getMaxElement(side,elements)}function getAllElements(){return document.querySelectorAll("body *")}function sizeIFrame(triggerEvent,triggerEventDesc,customHeight,customWidth){function checkTolarance(a,b){return!(Math.abs(a-b)<=tolerance)}customHeight=undefined!==customHeight?customHeight:getHeight[heightCalcMode](),customWidth=undefined!==customWidth?customWidth:getWidth[widthCalcMode](),checkTolarance(height,customHeight)||calculateWidth&&checkTolarance(width,customWidth)||"init"===triggerEvent?(lockTrigger(),sendMsg(height=customHeight,width=customWidth,triggerEvent)):triggerEvent in{init:1,interval:1,size:1}||!(heightCalcMode in resetRequiredMethods||calculateWidth&&widthCalcMode in resetRequiredMethods)?triggerEvent in{interval:1}||log("No change in size detected"):resetIFrame(triggerEventDesc)}function later(){previous=Date.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)}function sendSize(triggerEvent,triggerEventDesc,customHeight,customWidth){triggerLocked&&triggerEvent in doubleEventList?log("Trigger event cancelled: "+triggerEvent):(triggerEvent in{reset:1,resetPage:1,init:1}||log("Trigger event: "+triggerEventDesc),("init"===triggerEvent?sizeIFrame:sizeIFrameThrottled)(triggerEvent,triggerEventDesc,customHeight,customWidth))}function lockTrigger(){triggerLocked||(triggerLocked=!0,log("Trigger event lock on")),clearTimeout(triggerLockedTimer),triggerLockedTimer=setTimeout(function(){triggerLocked=!1,log("Trigger event lock off"),log("--")},eventCancelTimer)}function triggerReset(triggerEvent){height=getHeight[heightCalcMode](),width=getWidth[widthCalcMode](),sendMsg(height,width,triggerEvent)}function resetIFrame(triggerEventDesc){var hcm=heightCalcMode;heightCalcMode=heightCalcModeDefault,log("Reset trigger event: "+triggerEventDesc),lockTrigger(),triggerReset("reset"),heightCalcMode=hcm}function sendMsg(height,width,triggerEvent,msg,targetOrigin){!0===sendPermit&&(undefined===targetOrigin?targetOrigin=targetOriginDefault:log("Message targetOrigin: "+targetOrigin),log("Sending message to host page ("+(height=myID+":"+height+":"+width+":"+triggerEvent+(undefined!==msg?":"+msg:""))+")"),target.postMessage(msgID+height,targetOrigin))}function chkLateLoaded(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}();