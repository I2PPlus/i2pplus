!function(){function cleanValue(value){let cleanedValue=value.replace(/\[.*?\]/g,"").trim();return cleanedValue=(cleanedValue=(cleanedValue=(cleanedValue=(cleanedValue=(cleanedValue=cleanedValue.replace(/GMT/g,"")).replace(/_/g," ")).replace(/0\.0/g,"0")).replace(/9999999/g,"9999999 (Low latency)")).replace(/-30/g,"-30 (High latency)")).endsWith(".0")?cleanedValue.slice(0,-2):cleanedValue}function addToggles(){document.querySelectorAll(".section").forEach(section=>{let next=section.nextElementSibling;for(;next&&!next.classList.contains("section");)next.classList.add("hidden"),next=next.nextElementSibling}),document.querySelectorAll(".section").forEach(section=>{section.addEventListener("click",function(){this.classList.toggle("expanded");let next=this.nextElementSibling;for(;next&&!next.classList.contains("section");)next.classList.toggle("hidden"),next=next.nextElementSibling;this.classList.contains("expanded")?window.scrollTo(0,this.offsetTop):window.scrollTo(0,0)})});var sectionsToExpand=document.querySelectorAll(".ri, .tnl, .db");0<sectionsToExpand.length&&Array.from(sectionsToExpand).forEach(section=>{section.classList.add("expanded");let next=section.nextElementSibling;for(;next&&!next.classList.contains("section");)next.classList.remove("hidden"),next=next.nextElementSibling}),setTimeout(()=>viewprofile.removeAttribute("hidden"),100)}document.addEventListener("DOMContentLoaded",()=>{var viewprofile=document.getElementById("viewprofile"),profileContainer=document.querySelector("#viewprofile pre"),lines=profileContainer.innerText.split("\n");profileContainer.style.display="none";let manualSpeedScoreAdjustment=0,speedValue=null,tableHTML=(lines.forEach(line=>{var rest;line.startsWith("# ---")||line.startsWith("# ")&&line.includes(":")&&([line,...rest]=line.slice(2).split(":"),rest=rest.join(":").trim(),line=line.replace("(ms since the epoch)","").trim(),rest=cleanValue(rest),"Manual Speed Score adjustment"===line&&(manualSpeedScoreAdjustment=parseFloat(rest)),"Speed"===line)&&(speedValue=parseFloat(rest))}),"<table>");lines.forEach(line=>{if(!line.startsWith("# ---"))if(line.startsWith("# ")&&line.includes(":")){var[key,...rest]=line.slice(2).split(":"),rest=rest.join(":").trim(),key=key.replace("(ms since the epoch)","").replace("(ms)","").trim(),rest=cleanValue(rest);if("Speed"===key){var speed=speedValue-manualSpeedScoreAdjustment;if(0<speed){let convertedSpeed;isNaN(speed)||(1024<=speed?(convertedSpeed=(speed/1024).toFixed(2),tableHTML+="<tr class=stat><td>"+key+"</td><td>"+convertedSpeed+" MB/s</td></tr>"):(convertedSpeed=speed.toFixed(0),tableHTML+="<tr class=stat><td>"+key+"</td><td>"+convertedSpeed+" B/s</td></tr>"))}}else if("Time of last failed lookup from peer"===key||"Time of last successful lookup from peer"===key||"Time of last failed store to peer"===key||"Time of last successful store to peer"===key)speed="0"===(epoch=rest)?"Never":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][(epoch=new Date(parseInt(epoch))).getUTCDay()]+` ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][epoch.getUTCMonth()]} ${epoch.getUTCDate()} ${String(epoch.getUTCHours()).padStart(2,"0")}:${String(epoch.getUTCMinutes()).padStart(2,"0")}:${String(epoch.getUTCSeconds()).padStart(2,"0")} `+epoch.getFullYear(),tableHTML+="<tr class=stat><td>"+key+"</td><td>"+speed+"</td></tr>";else if("Period"===key)speed=key+": "+rest,tableHTML+="<tr class='subheading period'><th colspan=2>"+speed+"</th></tr>";else if("Average peer response time"===key){speed=parseFloat(rest);let formattedResponseTime;isNaN(speed)||(formattedResponseTime=1e3<speed?(speed/1e3).toFixed(1)+" seconds":speed.toFixed(0)+" milliseconds"),tableHTML+="<tr class=stat><td>"+key+"</td><td>"+formattedResponseTime+"</td></tr>"}else tableHTML+="<tr class=stat><td>"+key+"</td><td>"+rest+"</td></tr>"}else line.startsWith("# ")&&!line.includes(":")&&([speed,key]=(rest=(epoch=line.slice(2).trim()).match(/\[(.*?)\]/))?(line=rest[1],[epoch.replace(rest[0],"").trim(),line]):[epoch,""],tableHTML+="Router Information"===speed?"<tr class='section heading ri expanded'><th colspan='2' title='"+key+"'>"+speed+"</th></tr>":"NetDb History"===speed?"<tr class='section heading db expanded'><th colspan='2' title='"+key+"'>"+speed+"</th></tr>":"Tunnel History"===speed?"<tr class='section heading tnl expanded'><th colspan='2' title='"+key+"'>"+speed+"</th></tr>":"<tr class=section><th colspan='2' title='"+key+"'>"+speed+"</th></tr>");var epoch}),tableHTML+="</table>",viewprofile.innerHTML=tableHTML,viewprofile.classList.add("tabulated"),setTimeout(addToggles,50)})}();