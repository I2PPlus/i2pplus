import{convertKBtoMB}from"/js/convertKBtoMB.js";import{refreshElements}from"/themes/js/refreshElements.js";const main=document.getElementById("tunnels"),peers=document.getElementById("transitPeers"),summary=document.getElementById("transitSummary"),REFRESH_INTERVAL=1e4;let sorter=null;function setupSort(){summary&&null===sorter&&(sorter=new Tablesort(summary,{descending:!0}),summary.querySelectorAll("tbody tr"),summary.addEventListener("beforeSort",()=>{progressx.show(theme)}),summary.addEventListener("afterSort",()=>{progressx.hide()}))}function updateTunnels(){null===sorter&&setupSort();let selectors=["#tunnels"];peers&&(selectors=["#transitPeers"]),refreshElements(selectors,"/transitsummary",REFRESH_INTERVAL)}document.addEventListener("refreshComplete",()=>{sorter?.refresh(),convertKBtoMB(".tcount+td")}),document.addEventListener("DOMContentLoaded",()=>{updateTunnels()});