!function(){function Tablesort(el,options){if(!(this instanceof Tablesort))return new Tablesort(el,options);if(!el||"TABLE"!==el.tagName)throw new Error("Element must be a table");this.init(el,options||{})}const sortOptions=[],createEvent=name=>{return"function"==typeof CustomEvent?new CustomEvent(name):((evt=document.createEvent("CustomEvent")).initCustomEvent(name,!1,!1,void 0),evt);var evt},getInnerText=el=>el.getAttribute("data-sort")??el.textContent??el.innerText??"",caseInsensitiveSort=(a,b)=>(a=a.trim().toLowerCase())===(b=b.trim().toLowerCase())?0:a<b?1:-1,getCellByKey=(cells,key)=>Array.from(cells).find(cell=>cell.getAttribute("data-sort-column-key")===key),stabilize=(sort,antiStabilize)=>(a,b)=>{var res=sort(a.td,b.td);return 0===res?antiStabilize?b.index-a.index:a.index-b.index:res};Tablesort.extend=(name,pattern,sort)=>{if("function"!=typeof pattern||"function"!=typeof sort)throw new Error("Pattern and sort must be functions");sortOptions.push({name:name,pattern:pattern,sort:sort})},Tablesort.prototype={init(el,options){if(this.table=el,this.options=options,this.thead=!!el.tHead&&0<el.tHead.rows.length,options=this.thead?[...el.tHead.rows].find(r=>"thead"===r.getAttribute("data-sort-method"))||el.tHead.rows[el.tHead.rows.length-1]:el.rows[0]){var onClick=e=>{this.current&&this.current!==e.currentTarget&&this.current.removeAttribute("aria-sort"),this.current=e.currentTarget,this.sortTable(this.current)};for(const cell of options.cells)cell.setAttribute("role","columnheader"),"none"!==cell.getAttribute("data-sort-method")&&(cell.tabIndex=0,cell.addEventListener("click",onClick),cell.hasAttribute("data-sort-default"))&&(this.current=cell);this.current&&this.sortTable(this.current)}},sortTable(header,update){const columnKey=header.getAttribute("data-sort-column-key"),column=header.cellIndex;let sortFunction=caseInsensitiveSort,sortMethod=header.getAttribute("data-sort-method"),sortOrder=header.getAttribute("aria-sort");this.table.dispatchEvent(createEvent("beforeSort")),window.requestAnimationFrame(()=>{if(!update){var columnDirection=header.getAttribute("data-sort-direction");let defaultDescending=this.options.descending;"ascending"===columnDirection?defaultDescending=!1:"descending"===columnDirection&&(defaultDescending=!0),sortOrder="ascending"===sortOrder||"descending"!==sortOrder&&defaultDescending?"descending":"ascending",header.setAttribute("aria-sort",sortOrder)}if(!(this.table.rows.length<2)){var tbodyRows=this.table.tBodies[0]?.rows||[],sampleItems=[];let rowIndex=this.thead?0:1;if(!sortMethod){for(;sampleItems.length<3&&rowIndex<tbodyRows.length;){var cell=columnKey?getCellByKey(tbodyRows[rowIndex].cells,columnKey):tbodyRows[rowIndex].cells[column],cell=(cell?getInnerText(cell):"").trim();cell&&sampleItems.push(cell),rowIndex++}if(!sampleItems.length)return}for(const option of sortOptions)if(sortMethod){if(option.name===sortMethod){sortFunction=option.sort;break}}else if(sampleItems.every(option.pattern)){sortFunction=option.sort;break}this.col=column;for(const tbody of this.table.tBodies)if(!(tbody.rows.length<2)){var newRows=[],noSorts={};let totalRows=0;for(let j=0;j<tbody.rows.length;j++){var row=tbody.rows[j];if("none"===row.getAttribute("data-sort-method"))noSorts[totalRows]=row;else{const cell=columnKey?getCellByKey(row.cells,columnKey):row.cells[this.col];newRows.push({tr:row,td:cell?getInnerText(cell):"",index:totalRows})}totalRows++}"descending"===sortOrder?newRows.sort(stabilize(sortFunction,!0)):newRows.sort(stabilize(sortFunction,!1)).reverse();let noSortsSoFar=0;for(let j=0;j<totalRows;j++){var item=noSorts[j]||newRows[j-noSortsSoFar].tr;noSorts[j]&&noSortsSoFar++,tbody.appendChild(item)}}this.table.dispatchEvent(createEvent("afterSort"))}})},refresh(){this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=Tablesort:window.Tablesort=Tablesort}();