document.addEventListener("DOMContentLoaded",function(){function updateCountSpan(thElement,checkedItems,totalItems,needsSaving){var countSpan=thElement.querySelector("span")||document.createElement("span");countSpan.classList.add("statcount"),countSpan.textContent=(needsSaving?"* ":"")+checkedItems+" / "+totalItems,thElement.appendChild(countSpan)}function getCheckboxState(checkboxes){return Array.from(checkboxes).reduce((acc,cb)=>({...acc,[cb.value]:cb.checked}),{})}{var graphableStatRows=document.querySelectorAll(".graphableStat");const initialState={};graphableStatRows.forEach(row=>{const checkboxes=row.querySelector("td").querySelectorAll("input[type=checkbox]"),totalItems=checkboxes.length;var checkedItems=Array.from(checkboxes).filter(cb=>cb.checked).length;const thElement=row.previousElementSibling.querySelector("th"),sectionId=(thElement&&updateCountSpan(thElement,checkedItems,totalItems,!1),thElement.textContent.trim());initialState[sectionId]=getCheckboxState(checkboxes),checkboxes.forEach(cb=>{cb.addEventListener("change",()=>{var currentSectionState=getCheckboxState(checkboxes),currentSectionState=JSON.stringify(currentSectionState)!==JSON.stringify(initialState[sectionId]);updateCountSpan(thElement,Array.from(checkboxes).filter(cb=>cb.checked).length,totalItems,currentSectionState)})})}),initialState}const sections=[];let currentSection=null;document.querySelectorAll(".statgroup, .graphableStat").forEach(element=>{element.classList.contains("statgroup")?(currentSection&&sections.push(currentSection),currentSection={header:element,content:[]}):currentSection.content.push(element)}),currentSection&&sections.push(currentSection),sections.sort((a,b)=>function(a,b){var re=/(\d+)|(\D+)/g,aParts=a.match(re),bParts=b.match(re);for(let i=0;i<Math.min(aParts.length,bParts.length);i++){var aIsNumber,bIsNumber,aPart=aParts[i],bPart=bParts[i];if(aPart!==bPart)return aIsNumber=!isNaN(aPart),bIsNumber=!isNaN(bPart),aIsNumber&&bIsNumber?parseInt(aPart,10)-parseInt(bPart,10):aIsNumber?-1:bIsNumber?1:aPart.localeCompare(bPart)}return aParts.length-bParts.length}(a.header.querySelector("th").textContent.trim(),b.header.querySelector("th").textContent.trim())),function(sections){var tableBody=document.querySelector("#configstats tbody");tableBody.innerHTML="";const fragment=document.createDocumentFragment();sections.forEach(section=>{fragment.appendChild(section.header),section.content.forEach(content=>fragment.appendChild(content))}),tableBody.appendChild(fragment)}(sections),document.querySelectorAll("tr.statgroup th b").forEach(b=>{b.textContent=b.textContent.replace(/([a-z])([A-Z])/g,"$1 $2"),b.textContent=b.textContent.replace("Co Del","CoDel"),b.innerHTML=b.innerHTML.replace(/\[([^\]]+)\]/g,"<span class=subcat>$1</span>")}),document.querySelector("#configstats .optionsave>.cancel").addEventListener("click",event=>{event.preventDefault(),location.reload()})});