import{refreshElements}from"/js/refreshElements.js";!function(){const REFRESH_INTERVAL=1e4;let main,peers,tunnels,refreshBtn,sorter=null,isSetup=!1,lastPeerRowCount=-1;function getDOM(){main||(main=document.getElementById("tunnels"),peers=document.getElementById("transitPeers"),tunnels=document.getElementById("allTransit"),refreshBtn=document.getElementById("refreshPage"))}function refreshData(){getDOM();var notes=document.querySelectorAll(".statusnotes");let selector="#tunnels";peers&&0<notes.length&&(!isSetup&&tunnels&&(sorter=sorter||new Tablesort(tunnels,{descending:!0}),tunnels.addEventListener("beforeSort",()=>progressx?.show?.(theme)),tunnels.addEventListener("afterSort",()=>progressx?.hide?.()),refreshBtn&&refreshBtn.removeAttribute("href"),isSetup=!0),(notes=peers.querySelectorAll("tr").length)===lastPeerRowCount&&0<notes?selector="#transitPeers td>*, .statusnotes":(selector="#transitPeers, .statusnotes",lastPeerRowCount=notes),refreshElements(selector,"/transit",REFRESH_INTERVAL))}function init(retryCount=0){getDOM(),refreshBtn?(refreshBtn.addEventListener("click",e=>{e.preventDefault(),refreshData()}),refreshData()):retryCount<30&&setTimeout(()=>init(retryCount+1),3e3)}document.addEventListener("refreshComplete",()=>{sorter&&sorter.refresh()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>init()):init()}();